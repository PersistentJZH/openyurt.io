"use strict";(self.webpackChunkopenyurt_io=self.webpackChunkopenyurt_io||[]).push([[1664],{3905:function(t,e,n){n.d(e,{Zo:function(){return u},kt:function(){return s}});var a=n(67294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var d=a.createContext({}),p=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},u=function(t){var e=p(t.components);return a.createElement(d.Provider,{value:e},t.children)},c={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,d=t.parentName,u=i(t,["components","mdxType","originalType","parentName"]),m=p(n),s=r,k=m["".concat(d,".").concat(s)]||m[s]||c[s]||l;return n?a.createElement(k,o(o({ref:e},u),{},{components:n})):a.createElement(k,o({ref:e},u))}));function s(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var d in e)hasOwnProperty.call(e,d)&&(i[d]=e[d]);i.originalType=t,i.mdxType="string"==typeof t?t:r,o[1]=i;for(var p=2;p<l;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},44500:function(t,e,n){n.r(e),n.d(e,{assets:function(){return d},contentTitle:function(){return o},default:function(){return c},frontMatter:function(){return l},metadata:function(){return i},toc:function(){return p}});var a=n(87462),r=(n(67294),n(3905));const l={title:"Pool Coordinator \u6027\u80fd\u6d4b\u8bd5"},o=void 0,i={unversionedId:"test-report/pool-coordinator-test",id:"test-report/pool-coordinator-test",title:"Pool Coordinator \u6027\u80fd\u6d4b\u8bd5",description:"\u80cc\u666f",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/test-report/pool-coordinator-test.md",sourceDirName:"test-report",slug:"/test-report/pool-coordinator-test",permalink:"/zh/docs/next/test-report/pool-coordinator-test",draft:!1,editUrl:"https://github.com/openyurtio/openyurt.io/edit/master/docs/test-report/pool-coordinator-test.md",tags:[],version:"current",lastUpdatedBy:"DonyChen",lastUpdatedAt:1669963583,formattedLastUpdatedAt:"2022\u5e7412\u67082\u65e5",frontMatter:{title:"Pool Coordinator \u6027\u80fd\u6d4b\u8bd5"}},d={},p=[{value:"\u80cc\u666f",id:"\u80cc\u666f",level:2},{value:"\u6d4b\u8bd5\u73af\u5883",id:"\u6d4b\u8bd5\u73af\u5883",level:2},{value:"Kubernetes \u7248\u672c",id:"kubernetes-\u7248\u672c",level:3},{value:"Node \u914d\u7f6e",id:"node-\u914d\u7f6e",level:3},{value:"\u64cd\u4f5c\u7cfb\u7edf",id:"\u64cd\u4f5c\u7cfb\u7edf",level:4},{value:"CPU",id:"cpu",level:4},{value:"\u5185\u5b58",id:"\u5185\u5b58",level:4},{value:"\u78c1\u76d8",id:"\u78c1\u76d8",level:4},{value:"\u6d4b\u8bd5\u65b9\u6cd5",id:"\u6d4b\u8bd5\u65b9\u6cd5",level:2},{value:"\u6d4b\u8bd5\u7ed3\u679c",id:"\u6d4b\u8bd5\u7ed3\u679c",level:2},{value:"\u7b2c\u4e00\u9636\u6bb5",id:"\u7b2c\u4e00\u9636\u6bb5",level:3},{value:"\u7b2c\u4e8c\u9636\u6bb5",id:"\u7b2c\u4e8c\u9636\u6bb5",level:3},{value:"\u7b2c\u4e09\u9636\u6bb5",id:"\u7b2c\u4e09\u9636\u6bb5",level:3},{value:"\u7b2c\u56db\u9636\u6bb5",id:"\u7b2c\u56db\u9636\u6bb5",level:3},{value:"\u7b2c\u4e94\u9636\u6bb5",id:"\u7b2c\u4e94\u9636\u6bb5",level:3},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2}],u={toc:p};function c(t){let{components:e,...l}=t;return(0,r.kt)("wrapper",(0,a.Z)({},u,l,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u80cc\u666f"},"\u80cc\u666f"),(0,r.kt)("p",null,"Pool Coordinator \u662f\u8fb9\u7f18\u8282\u70b9\u6c60\u4e2d\u4e00\u4e2a\u91cd\u8981\u7684\u7ec4\u4ef6\uff0c\u5b83\u662f\u4e00\u4e2a\u7531 apiserver \u548c\u4f7f\u7528\u5185\u5b58\u5b58\u50a8\u6570\u636e\u7684 etcd \u7ec4\u6210\u7684 Pod\u3002"),(0,r.kt)("p",null,"\u8fb9\u7f18\u8282\u70b9\u6c60\u4e2d\u7684 node \u4f1a\u901a\u8fc7 Pool Coordinator \u9009\u51fa\u4e00\u4e2a\u4e3b\u8282\u70b9\uff0c\u8282\u70b9\u6c60\u4f9d\u8d56\u6b64\u4e3b\u8282\u70b9\u505a\u4e91\u7aef\u63a2\u6d3b\uff1bPool Coordinator \u4e5f\u7528\u4e8e\u5907\u4efd\u8fb9\u7f18\u8282\u70b9\u7684\u672c\u5730\u8d44\u6e90\u3002"),(0,r.kt)("p",null,"\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u5bf9 Pool Coordinator \u7684\u6027\u80fd\u8fdb\u884c\u6d4b\u8bd5\uff0c\u5e76\u7ed9\u51fa\u4e00\u4e2a\u63a8\u8350\u7684 Pool Coordinator \u8d44\u6e90\u914d\u7f6e\u3002"),(0,r.kt)("h2",{id:"\u6d4b\u8bd5\u73af\u5883"},"\u6d4b\u8bd5\u73af\u5883"),(0,r.kt)("h3",{id:"kubernetes-\u7248\u672c"},"Kubernetes \u7248\u672c"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'Major:"1", Minor:"22", GitVersion:"v1.22.0", GitCommit:"c2b5237ccd9c0f1d600d3072634ca66cefdf272f", GitTreeState:"clean", BuildDate:"2021-08-04T17:57:25Z", GoVersion:"go1.16.6", Compiler:"gc", Platform:"linux/amd64"')),(0,r.kt)("h3",{id:"node-\u914d\u7f6e"},"Node \u914d\u7f6e"),(0,r.kt)("p",null,"Master \u8282\u70b9\u4e0e worker \u8282\u70b9\u5747\u4f7f\u7528\u8fd0\u884c\u5728 VMWare Fusion \u4e2d\u7684\u865a\u62df\u673a\u3002"),(0,r.kt)("h4",{id:"\u64cd\u4f5c\u7cfb\u7edf"},"\u64cd\u4f5c\u7cfb\u7edf"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Master"),(0,r.kt)("th",{parentName:"tr",align:null},"Node"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LSB Version"),(0,r.kt)("td",{parentName:"tr",align:null},":core-4.1-amd64:core-4.1-noarch"),(0,r.kt)("td",{parentName:"tr",align:null},":core-4.1-amd64:core-4.1-noarch")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Distributor ID"),(0,r.kt)("td",{parentName:"tr",align:null},"CentOS"),(0,r.kt)("td",{parentName:"tr",align:null},"CentOS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Description"),(0,r.kt)("td",{parentName:"tr",align:null},"CentOS Linux release 8.4.2105"),(0,r.kt)("td",{parentName:"tr",align:null},"CentOS Linux release 8.4.2105")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Release"),(0,r.kt)("td",{parentName:"tr",align:null},"8.4.2105"),(0,r.kt)("td",{parentName:"tr",align:null},"8.4.2105")))),(0,r.kt)("h4",{id:"cpu"},"CPU"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Master"),(0,r.kt)("th",{parentName:"tr",align:null},"Node"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Architecture"),(0,r.kt)("td",{parentName:"tr",align:null},"x86_64"),(0,r.kt)("td",{parentName:"tr",align:null},"x86_64")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CPU op-mode (s)"),(0,r.kt)("td",{parentName:"tr",align:null},"32-bit, 64-bit"),(0,r.kt)("td",{parentName:"tr",align:null},"32-bit, 64-bit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Byte Order"),(0,r.kt)("td",{parentName:"tr",align:null},"Little Endian"),(0,r.kt)("td",{parentName:"tr",align:null},"Little Endian")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CPU (s)"),(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"4")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"On-line CPU(s) list"),(0,r.kt)("td",{parentName:"tr",align:null},"0-3"),(0,r.kt)("td",{parentName:"tr",align:null},"0-3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Thread(s) per core"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Core(s) per socket"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Socket(s)"),(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"4")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"NUMA node(s)"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Vendor ID"),(0,r.kt)("td",{parentName:"tr",align:null},"GenuineIntel"),(0,r.kt)("td",{parentName:"tr",align:null},"GenuineIntel")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CPU family"),(0,r.kt)("td",{parentName:"tr",align:null},"6"),(0,r.kt)("td",{parentName:"tr",align:null},"6")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Model"),(0,r.kt)("td",{parentName:"tr",align:null},"158"),(0,r.kt)("td",{parentName:"tr",align:null},"158")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Model name"),(0,r.kt)("td",{parentName:"tr",align:null},"Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz"),(0,r.kt)("td",{parentName:"tr",align:null},"Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Stepping"),(0,r.kt)("td",{parentName:"tr",align:null},"10"),(0,r.kt)("td",{parentName:"tr",align:null},"10")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CPU MHz"),(0,r.kt)("td",{parentName:"tr",align:null},"2592.000"),(0,r.kt)("td",{parentName:"tr",align:null},"2592.000")))),(0,r.kt)("h4",{id:"\u5185\u5b58"},"\u5185\u5b58"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Master"),(0,r.kt)("th",{parentName:"tr",align:null},"Node"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Total memory"),(0,r.kt)("td",{parentName:"tr",align:null},"7829472 K"),(0,r.kt)("td",{parentName:"tr",align:null},"7829472 K")))),(0,r.kt)("h4",{id:"\u78c1\u76d8"},"\u78c1\u76d8"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Master"),(0,r.kt)("th",{parentName:"tr",align:null},"Node"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Total Size"),(0,r.kt)("td",{parentName:"tr",align:null},"20GiB"),(0,r.kt)("td",{parentName:"tr",align:null},"20GiB")))),(0,r.kt)("h2",{id:"\u6d4b\u8bd5\u65b9\u6cd5"},"\u6d4b\u8bd5\u65b9\u6cd5"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u542f\u52a8 pool-coordinator\uff0c\u89c2\u5bdf\u521d\u59cb\u65f6\u7684\u8d44\u6e90\u5360\u7528\u60c5\u51b5\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5411 pool-coordinator \u4e2d\u5199\u5165 1000 \u4e2a Pod \u548c 500 \u4e2a Node\u3002\u5176\u4e2d\uff0c\u5355\u4e2a Pod\u3001Node \u8d44\u6e90\u5927\u5c0f\u5747\u7ea6\u4e3a 8kb\uff0c\u89c2\u5bdf\u5199\u5165\u540e\u7684\u8d44\u6e90\u5360\u7528\u60c5\u51b5\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5220\u9664 pool-coordinator \u4e2d\u7684\u6240\u6709 Pod \u548c Node \u8d44\u6e90\uff0c\u89c2\u5bdf\u8d44\u6e90\u5360\u7528\u60c5\u51b5\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5411 pool-coordinator \u4e2d\u518d\u6b21\u5199\u5165 1000 \u4e2a Pod \u548c 500 \u4e2a Node\uff0c\u5e76\u6301\u7eed\u968f\u673a\u66f4\u65b0 Pod\u3001Node \u4fe1\u606f\uff0c\u89c2\u5bdf\u8d44\u6e90\u5360\u7528\u60c5\u51b5\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u8bf7\u6c42 pool-coordinator \u9009\u4e3b\uff0c\u89c2\u5bdf\u662f\u5426\u6210\u529f\u3002")),(0,r.kt)("h2",{id:"\u6d4b\u8bd5\u7ed3\u679c"},"\u6d4b\u8bd5\u7ed3\u679c"),(0,r.kt)("h3",{id:"\u7b2c\u4e00\u9636\u6bb5"},"\u7b2c\u4e00\u9636\u6bb5"),(0,r.kt)("p",null,"\u542f\u52a8 pool-coordinator\uff0c\u89c2\u5bdf CPU \u548c\u5185\u5b58\u7684\u5360\u7528\u60c5\u51b5\uff08pause \u5bb9\u5668\u548c kubectl \u5bb9\u5668\u5360\u7528\u8f83\u5c11\uff0c\u6682\u4e0d\u7edf\u8ba1\uff0c\u4e0b\u540c\uff09\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"CPU \u5360\u7528\u91cf\u7ea6\u4e3a 70m ~ 90m\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5185\u5b58\u5360\u7528\u91cf\u7ea6\u4e3a 370MB\u3002\u5176\u4e2d\uff0capiserver \u7ea6\u5360\u7528 205MB\uff1betcd \u7ea6\u5360\u7528 165MB\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(91289).Z,width:"3632",height:"1518"}),"\n",(0,r.kt)("img",{src:n(20268).Z,width:"3630",height:"1598"}),"\n",(0,r.kt)("img",{src:n(72997).Z,width:"3634",height:"1486"}),"\n",(0,r.kt)("img",{src:n(19697).Z,width:"3632",height:"1596"})),(0,r.kt)("h3",{id:"\u7b2c\u4e8c\u9636\u6bb5"},"\u7b2c\u4e8c\u9636\u6bb5"),(0,r.kt)("p",null,"\u5411 pool-coordinator \u4e2d\u5199\u5165 1000 \u4e2a Pod \u548c 500 \u4e2a Node \u8d44\u6e90\uff0c\u89c2\u5bdf CPU \u548c\u5185\u5b58\u7684\u5360\u7528\u60c5\u51b5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"CPU \u5cf0\u503c\u4f7f\u7528\u91cf\u7ea6\u4e3a 310m\uff0c\u6574\u4f53\u6da8\u5e45\u4e0d\u660e\u663e\u3002\u5176\u4e2d\uff0capiserver CPU \u4f7f\u7528\u91cf\u7565\u6709\u4e0a\u6da8\uff1betcd \u53d8\u5316\u4e0d\u660e\u663e\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5185\u5b58\u5360\u7528\u91cf\u7ea6\u4e3a 450MB\u3002\u5176\u4e2d\uff0capiserver \u7ea6\u5360\u7528 240MB\uff1betcd \u7ea6\u5360\u7528 210MB\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(50033).Z,width:"3628",height:"1478"}),"\n",(0,r.kt)("img",{src:n(11726).Z,width:"3638",height:"1596"}),"\n",(0,r.kt)("img",{src:n(78708).Z,width:"3630",height:"1472"}),"\n",(0,r.kt)("img",{src:n(81688).Z,width:"3634",height:"1598"})),(0,r.kt)("h3",{id:"\u7b2c\u4e09\u9636\u6bb5"},"\u7b2c\u4e09\u9636\u6bb5"),(0,r.kt)("p",null,"\u5220\u9664 pool-coordinator \u4e2d\u7684\u6240\u6709 Pod \u548c Node \u8d44\u6e90\uff0c\u89c2\u5bdf\u8d44\u6e90\u5360\u7528\u60c5\u51b5\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"CPU \u5cf0\u503c\u4f7f\u7528\u91cf\u7ea6\u4e3a 260m\uff0c\u53d8\u5316\u4e0d\u660e\u663e\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5185\u5b58\u5360\u7528\u91cf\u6700\u9ad8\u7ea6\u5230 590MB\u3002\u5176\u4e2d\uff0capiserver \u7ea6\u5360\u7528 350MB\uff1betcd \u7ea6\u5360\u7528 240MB\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(72547).Z,width:"3626",height:"1490"}),"\n",(0,r.kt)("img",{src:n(47060).Z,width:"3630",height:"1590"}),"\n",(0,r.kt)("img",{src:n(68317).Z,width:"3632",height:"1492"}),"\n",(0,r.kt)("img",{src:n(53061).Z,width:"3628",height:"1592"})),(0,r.kt)("h3",{id:"\u7b2c\u56db\u9636\u6bb5"},"\u7b2c\u56db\u9636\u6bb5"),(0,r.kt)("p",null,"\u5411 pool-coordinator \u4e2d\u518d\u6b21\u5199\u5165 1000 \u4e2a Pod \u548c 500 \u4e2a Node\uff0c\u5e76\u6301\u7eed\u968f\u673a\u66f4\u65b0 Pod\u3001Node \u4fe1\u606f\uff0c\u89c2\u5bdf\u8d44\u6e90\u5360\u7528\u60c5\u51b5\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"CPU \u4f7f\u7528\u91cf\u6700\u9ad8\u4f4d\u7ea6\u4e3a 640m\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5185\u5b58\u4f7f\u7528\u91cf\u6301\u7eed\u4e0a\u6da8\uff0c\u76f4\u5230 etcd container \u53d1\u751f OOM\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(99152).Z,width:"3626",height:"1494"}),"\n",(0,r.kt)("img",{src:n(31930).Z,width:"3630",height:"1592"}),"\n",(0,r.kt)("img",{src:n(41090).Z,width:"3626",height:"1496"}),"\n",(0,r.kt)("img",{src:n(90935).Z,width:"3638",height:"1600"})),(0,r.kt)("h3",{id:"\u7b2c\u4e94\u9636\u6bb5"},"\u7b2c\u4e94\u9636\u6bb5"),(0,r.kt)("p",null,"\u542f\u52a8\u5916\u90e8\u7a0b\u5e8f\uff0c\u8bf7\u6c42 pool-coordinator \u9009\u4e3b\uff0c\u9009\u4e3b\u6210\u529f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"I1103 20:47:15.123746   87201 leaderelection.go:248] attempting to acquire leader lease default/test-lock...\nI1103 20:47:15.260887   87201 leaderelection.go:258] successfully acquired lease default/test-lock\nI1103 20:47:15.260951   87201 main.go:465] Controller loop...\n")),(0,r.kt)("p",null,"\u67e5\u770b pool-coordinator \u4e2d lease \u4fe1\u606f\uff0c\u521b\u5efa\u6210\u529f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ kubectl get lease\nNAME        HOLDER                                 AGE\ntest-lock   2cd06119-8be6-4e0e-a6aa-398f1eca32c0   102s\n")),(0,r.kt)("h2",{id:"\u7ed3\u8bba"},"\u7ed3\u8bba"),(0,r.kt)("p",null,"\u5f53 NodePool \u5185\u7684\u8d44\u6e90\u5728\u4e00\u5b9a\u6570\u91cf\u5185\uff08Pod\uff1a1000\uff0c\u5355\u4e2a 8KB\uff1bNode 500\uff0c\u5355\u4e2a 8KB\uff09\u65f6\uff0cpool-coordinator \u7684\u6700\u5c0f\u8d44\u6e90\u5360\u7528\u91cf\u7ea6\u4e3a CPU 310m\u3001\u5185\u5b58 450MB\u3002"),(0,r.kt)("p",null,"\u7531\u4e8e etcd \u81ea\u8eab\u7684\u5b58\u50a8\u673a\u5236\uff0c\u5220\u9664\u8d44\u6e90\u5e76\u4e0d\u4f1a\u8ba9 pool-coordinator \u7684\u5185\u5b58\u7528\u91cf\u4e0b\u964d\uff0c\u53cd\u800c\u77ed\u671f\u4f1a\u5bfc\u81f4\u5185\u5b58\u7528\u91cf\u4e0a\u6da8\u3002"),(0,r.kt)("p",null,"\u77ed\u65f6\u95f4\u5185\u9891\u7e41\u66f4\u65b0\u8d44\u6e90\uff0c\u5c06\u5bfc\u81f4 etcd \u4e2d\u7684 revision \u53d8\u591a\uff0c\u5f15\u53d1 etcd \u6570\u636e\u91cf\u5feb\u901f\u4e0a\u6da8\u3002\u5982 etcd container \u914d\u7f6e\u4e86 resource limit\uff0c\u5219\u4f1a\u4f7f\u5f97 container \u89e6\u53d1 OOM\u3002"),(0,r.kt)("p",null,"\u6839\u636e\u6d4b\u8bd5\u7ed3\u679c\u53ef\u77e5\uff0cCPU \u5e76\u975e\u8d44\u6e90\u74f6\u9888\uff1b\u800c\u5185\u5b58\u5728\u6781\u7aef\u60c5\u51b5\u4e0b\u4f1a\u66b4\u6da8\uff0c\u5f71\u54cd\u8fb9\u7f18\u8d44\u6e90\u4f7f\u7528\u6548\u7387\u3002"),(0,r.kt)("p",null,"\u6545\u5f53\u5355\u4e2a\u8fb9\u7f18\u8282\u70b9\u6c60\u7684 Node \u6570\u91cf\u5c0f\u4e8e 500\u3001Pod \u6570\u91cf\u5c0f\u4e8e 1000 \u65f6\uff0c\u63a8\u8350\u4f7f\u7528\u4ee5\u4e0b\u8d44\u6e90\u9650\u5236\u914d\u7f6e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiserverResources:\n  requests:\n    cpu: 250m\n---\netcdResources:\n  limits:\n    cpu: 200m\n    memory: 512Mi\n  requests:\n    cpu: 100m\n    memory: 256Mi\n")))}c.isMDXComponent=!0},91289:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step1-cpu-sum-497facefc565373ba9ac9ec29aab8173.jpg"},20268:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step1-cpu-6f34b2155be7b18568b3344eddf4f05a.jpg"},72997:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step1-mem-sum-5a1b4943fdda0bab87062ceadec13fd9.jpg"},19697:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step1-mem-a8392c3b9c63478792d43c481b0907c0.jpg"},50033:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step2-cpu-sum-fba471d1e780d1cd3e97f36476581fe5.jpg"},11726:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step2-cpu-e44afe4b35e3ab5226445f0175598386.jpg"},78708:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step2-mem-sum-336e12a9d81c997ecb53308fa9bb037d.jpg"},81688:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step2-mem-47fbe35e30c4b84170fe82c88b8161a4.jpg"},72547:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step3-cpu-sum-3676a2641362ff4ac3d917f1d1c89f83.jpg"},47060:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step3-cpu-6721b33c3022dc9962d851a1f0a642c1.jpg"},68317:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step3-mem-sum-d724ad07eed6dd82b4ac442544dea8b2.jpg"},53061:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step3-mem-d6c795f26455abfc2056d2e18579c4a2.jpg"},99152:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step4-cpu-sum-30a0191aa907fe4fe2c3b7b7274d1262.jpg"},31930:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step4-cpu-1920f06aa3db6d096ddb8f5866a29741.jpg"},41090:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step4-mem-sum-dd1a710ded10a10e1ba4c2dcc04612a9.jpg"},90935:function(t,e,n){e.Z=n.p+"assets/images/pool-coordinator-step4-mem-8cd7c6b3ece1e42a3803d0b2a0d9326b.jpg"}}]);