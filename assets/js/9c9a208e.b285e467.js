"use strict";(self.webpackChunkopenyurt_io=self.webpackChunkopenyurt_io||[]).push([[4854],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),d=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=d(e.components);return o.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=d(n),m=a,g=p["".concat(c,".").concat(m)]||p[m]||u[m]||r;return n?o.createElement(g,i(i({ref:t},s),{},{components:n})):o.createElement(g,i({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<r;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},39860:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var o=n(87462),a=(n(67294),n(3905));const r={title:"YurtIoTDock"},i=void 0,l={unversionedId:"core-concepts/yurt-iot-dock",id:"core-concepts/yurt-iot-dock",title:"YurtIoTDock",description:"Background",source:"@site/docs/core-concepts/yurt-iot-dock.md",sourceDirName:"core-concepts",slug:"/core-concepts/yurt-iot-dock",permalink:"/docs/next/core-concepts/yurt-iot-dock",draft:!1,editUrl:"https://github.com/openyurtio/openyurt.io/edit/master/docs/core-concepts/yurt-iot-dock.md",tags:[],version:"current",lastUpdatedBy:"chenlong",lastUpdatedAt:1694421390,formattedLastUpdatedAt:"Sep 11, 2023",frontMatter:{title:"YurtIoTDock"},sidebar:"docs",previous:{title:"NodeResourceManager",permalink:"/docs/next/core-concepts/node-resource-manager"},next:{title:"YurtCoordinator",permalink:"/docs/next/core-concepts/yurt-coordinator"}},c={},d=[{value:"Background",id:"background",level:2},{value:"Edge device management platform",id:"edge-device-management-platform",level:2},{value:"PlatformAdmin",id:"platformadmin",level:3},{value:"AutoCollector",id:"autocollector",level:3},{value:"Version of PlatformAdmin",id:"version-of-platformadmin",level:3},{value:"Edge device synchronization component",id:"edge-device-synchronization-component",level:2},{value:"device management related CRDs",id:"device-management-related-crds",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Version of Yurt-IoT-Dock",id:"version-of-yurt-iot-dock",level:3},{value:"Tutorial",id:"tutorial",level:3},{value:"References",id:"references",level:2}],s={toc:d};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,o.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"background"},"Background"),(0,a.kt)("p",null,'OpenYurt has been designed to meet various DevOps requirements against typical edge infrastructures. It provides the same user experience for managing the edge applications as if they were running in the cloud infrastructure.\nHowever, when the related management capability is extended to the edge "device" layer, the following problems may occur:'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"In order to support various edge devices, the existing framework must develop special adapters for each category of devices;"),(0,a.kt)("li",{parentName:"ul"},"When adapting Kubernetes to the edge computing environments, existing solutions either change the system architecture or modify core components (such as kubelet) significantly.")),(0,a.kt)("p",null,'At the same time, we saw a lot of great edge device management platforms emerging in the community\uff0csuch as EdgeX Foundry. inspiring by the Unix philosophy, "Do one thing and do it well",\nwe believe that Kubernetes should focus on managing computing resources while edge devices management can be done by adopting existing edge computing platforms.'),(0,a.kt)("p",null,"A overall architecture about cloud-edge-device depicted below"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"img",src:n(98857).Z,width:"1412",height:"1402"})),(0,a.kt)("p",null,"The communication range of edge devices is usually limited to a certain network area. Therefore, edge nodes in the same network area can be divided into a nodepool. So a device management platform and a yurt-device-controller\ncan be deployed in each nodepool.\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"When communicating with kube-apiserver on the cloud, Yurt-Device-Controller only watches the device objects in its nodepool and synchronizes the updated specs to the corresponding devices through the corresponding device management platform."),(0,a.kt)("li",{parentName:"ul"},"When communicating with the device management platform\uff0cYurtHub, NodePool, and UnitedDeployment capabilities are reused. The device information in the node pool is abstracted into device, deviceService, and deviceProfile objects and synchronized to the cloud.")),(0,a.kt)("h2",{id:"edge-device-management-platform"},"Edge device management platform"),(0,a.kt)("p",null,"EdgeX Foundry is a powerful, ecosystem-supported, edge computing platform for the Internet of Things (IoT) that is plug-and-play and open-source. It offers a high level of flexibility and scalability, significantly reducing the complexity of interoperability between applications and edge devices, sensors, and other hardware. OpenYurt collaborates with the EdgeX Foundry community and has achieved integration and compatibility starting from version 0.5.0. In addition to the yurt-device-controller, OpenYurt also provides the yurt-edgex-manager component to simplify the deployment of EdgeX Foundry in edge scenarios."),(0,a.kt)("p",null,"Combined with the above cloud side architecture diagram, the architecture diagram of OpenYurt and EdgeX Foundry integration is as follows:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://intranetproxy.alipay.com/skylark/lark/0/2021/png/26856741/1634174981669-3c6aa2db-73fa-4b1b-9698-82aab9e14461.png",alt:"img"})),(0,a.kt)("h3",{id:"platformadmin"},"PlatformAdmin"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"In previous versions, OpenYurt introduced a controller called yurt-edgex-controller to manage EdgeX Custom Resources (CRs). EdgeX CR serves as an abstraction for deploying EdgeX Foundry within OpenYurt. Users can manipulate CRs to manage the deployment, updates, and deletion of EdgeX without the need for complex YAML files or Helm Charts. By creating an EdgeX CR, users can leverage yurt-edgex-manager, which deploys EdgeX based on the CR's version and the corresponding Nodepool's name. Within a cluster, users can deploy multiple instances of EdgeX based on the number of Nodepools. Each EdgeX instance can be configured with a specific version and a set of EdgeX services.")),(0,a.kt)("p",null,"Starting from OpenYurt v1.4.0, the yurt-edgex-controller has been merged into yurt-manager. Users no longer need to deploy any additional components separately. By installing yurt-manager, users can gain access to all the capabilities for managing edge devices without any additional steps."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"img",src:n(58267).Z,width:"1969",height:"1347"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"PlatformAdmin"),"\uff1aPlatformAdmin has evolved from the previous versions of the EdgeX Custom Resource Definition (CRD) and serves as an abstraction for the edge device management platform. Users can simply provide input such as the platform to be integrated, the name of the NodePool to be deployed, the desired version, and other relevant details. This allows for the deployment of a complete edge device management platform within the specified NodePool."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"AutoCollector"),"\uff1aOpenYurt relies on the AutoCollector tool for automatic adaptation and integration with EdgeX within its internal implementation. This tool has been utilized since the Jakarta release and continues to be used in the latest release, Minnesota. Going forward, OpenYurt will maintain its dependency on AutoCollector for rapid adaptation to new versions of EdgeX. This ensures efficient integration and compatibility between OpenYurt and EdgeX in future releases."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Component Mechanism"),"\uff1aIn the v1.4.0 release, we have further enhanced the integration with EdgeX. The current PlatformAdmin Custom Resource (CR) supports one-click configuration of optional components. You can refer to the ",(0,a.kt)("a",{parentName:"li",href:"/docs/next/reference/iot/components"},"Components Documentation")," for the component names to be used in the configuration. This allows for easier customization and selection of specific components within the EdgeX ecosystem through the PlatformAdmin CR."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"PlatformAdminFramework"),"\uff1aIn the v1.4.0 release, we introduced the Component mechanism to cater to entry-level users. Additionally, to accommodate advanced users who require customized configurations, we also provided a Framework mechanism. The configuration files corresponding to PlatformAdmin are stored in the Kubernetes cluster as ConfigMaps. Advanced users can simply modify the contents of the ConfigMap, following the native Kubernetes specifications, to customize their edge device management platform according to their specific needs.")),(0,a.kt)("p",null,"In OpenYurt, EdgeX services are exposed to the outside world through Kubernetes Services. Despite different EdgeX instances using the same Kubernetes service name, ServiceTopology ensures that EdgeX components can only access other components belonging to the same EdgeX instance, preventing any cross-access scenarios."),(0,a.kt)("p",null,"The platformadmin-controller leverages the capabilities of YurtAppSet to deploy EdgeX components within a NodePool. This allows for the deployment and management of EdgeX components specifically within the designated NodePool, ensuring proper isolation and control within the OpenYurt environment."),(0,a.kt)("h3",{id:"autocollector"},"AutoCollector"),(0,a.kt)("p",null,"AutoCollector is a component responsible for automatically collecting and synchronizing information about edge components. The platformadmin-controller reads standardized configuration files collected by AutoCollector and uses them as templates to deploy EdgeX components. When a new version of EdgeX becomes available, OpenYurt automatically synchronizes with it, reducing the manual effort required for frequent adaptation to new versions. Additionally, AutoCollector is responsible for converting single-architecture images of EdgeX components into multi-architecture images and synchronizing them to the OpenYurt repository. This ensures compatibility and availability of EdgeX components across different architectures in the OpenYurt environment."),(0,a.kt)("p",null,"With the help of AutoCollector, OpenYurt has already achieved support for all versions of EdgeX starting from Hanoi. In the future, AutoCollector will continue to be utilized to quickly keep pace with updates in EdgeX versions. This ensures that OpenYurt remains compatible with the latest releases of EdgeX and can efficiently adapt to any changes or enhancements introduced in subsequent versions."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"img",src:n(38788).Z,width:"1734",height:"1348"})),(0,a.kt)("h3",{id:"version-of-platformadmin"},"Version of PlatformAdmin"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Version"),(0,a.kt)("th",{parentName:"tr",align:null},"Image"),(0,a.kt)("th",{parentName:"tr",align:null},"Release Date"),(0,a.kt)("th",{parentName:"tr",align:null},"Changes"),(0,a.kt)("th",{parentName:"tr",align:null},"Remark"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v0.1.0"),(0,a.kt)("td",{parentName:"tr",align:null},"openyurt/yurt-edgex-manager:0.1.0"),(0,a.kt)("td",{parentName:"tr",align:null},"2021.09"),(0,a.kt)("td",{parentName:"tr",align:null},"First Release"),(0,a.kt)("td",{parentName:"tr",align:null},"-")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v0.2.0"),(0,a.kt)("td",{parentName:"tr",align:null},"openyurt/yurt-edgex-manager:0.2.0"),(0,a.kt)("td",{parentName:"tr",align:null},"2022.05"),(0,a.kt)("td",{parentName:"tr",align:null},"Support EdgeX LTS Version"),(0,a.kt)("td",{parentName:"tr",align:null},"-")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v1.4.0"),(0,a.kt)("td",{parentName:"tr",align:null},"openyurt/yurt-manager:v1.4.0"),(0,a.kt)("td",{parentName:"tr",align:null},"2023.09"),(0,a.kt)("td",{parentName:"tr",align:null},"All versions from 2.x to 3.0 are supported"),(0,a.kt)("td",{parentName:"tr",align:null},"Merge yurt-edgex-manager into yurt-manager")))),(0,a.kt)("h2",{id:"edge-device-synchronization-component"},"Edge device synchronization component"),(0,a.kt)("h3",{id:"device-management-related-crds"},"device management related CRDs"),(0,a.kt)("p",null,"To manage devices in the real world, we should make some abstractions\uff0cBeing a component connecting cloud and edge management platform, Yurt-device-controller proposed 3 CRDs: DeviceProfile\u3001DeviceService and Device\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"DeviceProfile"),"\uff1adefines a type of devices using same kind of protocol, which includes some generic information like the manufacturer's name, the device description, and the device model. DeviceProfile also defines what kind of resources (e.g., temperature, humidity) this type of device provided and how to read/write these resources."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"DeviceService"),"\uff1adefines the way of how to connect a device to the OpenYurt, like the URL of the device. The DeviceService can not exist alone. Every DeviceService must associate with a DeviceProfile."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Device"),'\uff1ais used to refer to a sensor, actuator, or IoT "thing", it gives the detailed definition of a specific device, like which DeviceProfile it belongs to and which DeviceService it used to connect to the system.')),(0,a.kt)("h3",{id:"architecture"},"Architecture"),(0,a.kt)("p",null,"By abstracting the three types of Custom Resource Definitions (CRDs) mentioned above, it is possible to reflect the basic status information of devices. Interacting with the corresponding controller and edge device management platform, the discovered edge devices can be promptly mapped to the cloud. Simultaneously, the yurt-iot-dock component synchronizes modifications made to device properties on the cloud (e.g., setting the on/off state of a lighting device) to the edge devices, thereby affecting the physical devices in the real world. Users can achieve the goal of operating and managing complex edge devices in a cloud-native manner by declaratively modifying the corresponding fields of CRs. The following are the three components that constitute the yurt-iot-dock:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Device controller"),": It can abstract device objects in the edge platform into device CRs and synchronize them to the cloud. With the support of device controller, users can influence the actual device on the edge platform through the operation of cloud device CR, such as creating a device, deleting a device, updating device attributes (such as setting the light on and off, etc.)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"DeviceService controller"),": It can abstract deviceService objects in the edge platform into deviceService CRs and synchronize them to the cloud. With the support of deviceService Controller, users can view deviceService information of edge platforms in the cloud, and create or delete deviceService CRs to affect the actual deviceService of edge platforms."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"DeviceProfile controller"),": It can abstract deviceProfile objects in the edge platform into deviceProfile CRs and synchronize them to the cloud. With the support of deviceProfile Controller, users can view deviceProfile information of edge platforms in the cloud, and create or delete deviceProfile CRs to affect the actual deviceService of edge platforms.")),(0,a.kt)("h3",{id:"version-of-yurt-iot-dock"},"Version of Yurt-IoT-Dock"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Version"),(0,a.kt)("th",{parentName:"tr",align:null},"Image"),(0,a.kt)("th",{parentName:"tr",align:null},"Release Date"),(0,a.kt)("th",{parentName:"tr",align:null},"Changes"),(0,a.kt)("th",{parentName:"tr",align:null},"Remark"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v0.1.0"),(0,a.kt)("td",{parentName:"tr",align:null},"openyurt/yurt-device-controller:v0.1.0"),(0,a.kt)("td",{parentName:"tr",align:null},"2021.09"),(0,a.kt)("td",{parentName:"tr",align:null},"First Release"),(0,a.kt)("td",{parentName:"tr",align:null},"-")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v0.2.0"),(0,a.kt)("td",{parentName:"tr",align:null},"openyurt/yurt-device-controller:v0.1.0"),(0,a.kt)("td",{parentName:"tr",align:null},"2022.05"),(0,a.kt)("td",{parentName:"tr",align:null},"Support EdgeX LTS Version"),(0,a.kt)("td",{parentName:"tr",align:null},"-")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"v1.4.0"),(0,a.kt)("td",{parentName:"tr",align:null},"openyurt/yurt-iot-dock:v1.4.0"),(0,a.kt)("td",{parentName:"tr",align:null},"2023.09"),(0,a.kt)("td",{parentName:"tr",align:null},"Merge into main repo"),(0,a.kt)("td",{parentName:"tr",align:null},"-")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"latest"),(0,a.kt)("td",{parentName:"tr",align:null},"openyurt/yurt-iot-dock:latest"),(0,a.kt)("td",{parentName:"tr",align:null},"2023.09"),(0,a.kt)("td",{parentName:"tr",align:null},"Added support for edgex 3.0"),(0,a.kt)("td",{parentName:"tr",align:null},"-")))),(0,a.kt)("h3",{id:"tutorial"},"Tutorial"),(0,a.kt)("p",null,"yurt-iot-dock is used as a component of the PlatformAdmin CR and can be deployed to the corresponding node pool by adding it to PlatformAdmin, for example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: iot.openyurt.io/v1alpha2\nkind: PlatformAdmin\nmetadata:\n  name: edgex-sample\nspec:\n  version: minnesota\n  poolName: hangzhou\n  components:\n  - name: yurt-iot-dock\n")),(0,a.kt)("p",null,"Similarly, by removing yurt-iot-dock from the components list, you can cancel the deployment of yurt-iot-dock in the corresponding NodePool. This allows you to selectively control which components are deployed within specific NodePools."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For details, see ",(0,a.kt)("a",{parentName:"strong",href:"/docs/next/user-manuals/iot/edgex-foundry"},"Cloud Native Device Management"),".")),(0,a.kt)("h2",{id:"references"},"References"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://openyurt.io/"},"OpenYurt")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.edgexfoundry.org/"},"EdgeX Foundry"))))}u.isMDXComponent=!0},98857:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/cloud-edge-device-d7d6d132d9b49582462927972b8c094c.png"},38788:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/auto-collector-ca1ea66c6e2c536cb2c310b0a8cab172.png"},58267:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/platform-adminv1.4.0-20da11e750ce6fb04fc575b725682f6e.png"}}]);