"use strict";(self.webpackChunkopenyurt_io=self.webpackChunkopenyurt_io||[]).push([[3475],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>b});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=o.createContext({}),s=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=s(e.components);return o.createElement(l.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},p=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=d(e,["components","mdxType","originalType","parentName"]),p=s(t),b=a,m=p["".concat(l,".").concat(b)]||p[b]||c[b]||r;return t?o.createElement(m,i(i({ref:n},u),{},{components:t})):o.createElement(m,i({ref:n},u))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=p;var d={};for(var l in n)hasOwnProperty.call(n,l)&&(d[l]=n[l]);d.originalType=e,d.mdxType="string"==typeof e?e:a,i[1]=d;for(var s=2;s<r;s++)i[s]=t[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}p.displayName="MDXCreateElement"},85685:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>d,toc:()=>s});var o=t(87462),a=(t(67294),t(3905));const r={title:"pod node binding"},i=void 0,d={unversionedId:"user-manuals/autonomy/node-pod-binding",id:"version-v1.2/user-manuals/autonomy/node-pod-binding",title:"pod node binding",description:"Background introduction",source:"@site/versioned_docs/version-v1.2/user-manuals/autonomy/node-pod-binding.md",sourceDirName:"user-manuals/autonomy",slug:"/user-manuals/autonomy/node-pod-binding",permalink:"/docs/v1.2/user-manuals/autonomy/node-pod-binding",draft:!1,editUrl:"https://github.com/openyurtio/openyurt.io/edit/master/docs/user-manuals/autonomy/node-pod-binding.md",tags:[],version:"v1.2",lastUpdatedBy:"lu chen",lastUpdatedAt:1678177474,formattedLastUpdatedAt:"Mar 7, 2023",frontMatter:{title:"pod node binding"},sidebar:"version-v1.2/docs",previous:{title:"heartbeat delegation for disconnected nodes",permalink:"/docs/v1.2/user-manuals/autonomy/heartbeat-delegation-for-disconnected-nodes"},next:{title:"Raven",permalink:"/docs/v1.2/user-manuals/network/raven"}},l={},s=[{value:"Background introduction",id:"background-introduction",level:2},{value:"How to use",id:"how-to-use",level:2},{value:"Note",id:"note",level:2}],u={toc:s};function c(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"background-introduction"},"Background introduction"),(0,a.kt)("p",null,"Some edge services require that Pods not be evicted in the event of a node failure, but that a specific Pod be bound to a specific node. For example, the application of image processing needs to be bound to the machine corresponding to the camera, and the application of intelligent transportation needs to be fixed to the machine at a certain intersection."),(0,a.kt)("h2",{id:"how-to-use"},"How to use"),(0,a.kt)("p",null,"Users can enable/disable binding feature by following steps."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Add Binding Annotation to Node"))),(0,a.kt)("p",null,"Users can add binding annotation to nodes to enable the Edge Binding feature, and all Pods on the node will be bound to that node and will not be affected by the cloud-edge network."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# enable Edge Binding on node1\nkubectl annotate nodes node1 node.beta.openyurt.io/autonomy=true\n")),(0,a.kt)("p",null,"There're following two ways to disable the Edge Binding of node."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# remove the binding annotation\nkubectl annotate nodes node1 node.beta.openyurt.io/autonomy-\n# set the value of binding annotation as false\nkubectl annotate --overwrite nodes node1 node.beta.openyurt.io/autonomy=false\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Add Binding Annotation to Pod"))),(0,a.kt)("p",null,"Users can also by adding the Annotation to the Pod to enable binding (or modify the ",(0,a.kt)("inlineCode",{parentName:"p"},"Deployment.Spec.Template.Annotations")," field, all Pods will be affected), the Pod will be bound to the node, not affected by cloud edge network."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# pod1 enable Binding\nkubectl annotate pods pod1 apps.openyurt.io/binding=true\n")),(0,a.kt)("p",null,"There're following two ways to disable Binding."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# remove the binding annotation\nkubectl annotate pods pod1 apps.openyurt.io/binding-\n# set the value of binding annotation as false\nkubectl annotate --overwrite pods pod1 apps.openyurt.io/binding=false\n")),(0,a.kt)("h2",{id:"note"},"Note"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Edge Node After the node binding function is enabled,  pods on edge nodes will not be expelled, no matter the node NotReady caused by cloud edge network disconnection or node fault."),(0,a.kt)("li",{parentName:"ul"},"Node binding is not recommended for cloud nodes. If enabled, pods cannot be evicted and rescheduled when the cloud node is NotReady."),(0,a.kt)("li",{parentName:"ul"},"After OpenYurt version 1.2.0, if a Pool-Coordinator is enabled, edge nodes can maintain the Ready state even when the cloud edge network is disconnected using the heartbeat proxy mechanism. In this case, the node binding capability ensures that NotReady service Pods will not be expelled even if the node fails.")))}c.isMDXComponent=!0}}]);